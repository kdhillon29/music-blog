---
import { type CollectionEntry, getEntry } from "astro:content";
import { Image } from "astro:assets";

type Props = {
  post: CollectionEntry<"posts">;
};

const { post } = Astro.props;
const { remarkPluginFrontmatter } = await post.render();

const author = await getEntry("authors", post.data.author.id);

if (!author) {
  return Astro.redirect("/404");
}
---

<div class="flex justify-between items-center mb-10">
  <div class="flex items-center gap-x-2">
    <a href={`/author/${author.slug}`}>
      <Image
        src={author.data.image}
        alt={author.data.name}
        aria-label={`Read more from ${author.data.name}`}
        width={48}
        height={48}
        format="webp"
        class="rounded-full border-2 border-secondary aspect-square w-12 object-cover"
      />
    </a>

    <a
      href={`/author/${author.slug}`}
      class="text-zinc-600 text-sm md:text-md font-semibold"
    >
      {author.data.name}
    </a>
  </div>

  <span class="text-zinc-500 px-3 py-2 rounded-xl text-sm md:text-md">
    {remarkPluginFrontmatter.minutesRead} | {post.data.date}
  </span>
</div>
