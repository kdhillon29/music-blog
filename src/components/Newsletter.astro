<div class="flex flex-col gap-3 text-neutral-200 items-center">
  <div>
    <h2 class="text-white text-xl font-semibold max-sm:text-sm">
      Subscribe to Our Newsletter!
    </h2>
    <p class="text-muted-foreground text-sm max-sm:hidden">
      Join the community and learn from Music Producers and Enthusiasts
    </p>
  </div>
  <form method="POST" action="/api/newsletter" class="flex md:max-w-xl gap-2">
    <input
      transition:persist="false"
      type="email"
      name="email"
      required
      aria-required="true"
      placeholder="Enter your Email"
      id="email"
      class="bg-neutral-300 :focus:border-teal-500 text-zinc-600 max-sm:w-2/3 shadow-sm text-neutral-200 rounded-lg md:w-full p-2 md:px-4 md:text-lg"
    />

    <button
      id="newsletterBtn"
      type="submit"
      class="bg-primary/70 text-white p-3 md:px-6 rounded-xl md:text-2xl"
    >
      Subscribe
    </button>
  </form>
</div>

<script is:inline>
  console.log("script");
  const validateEmail = (email) => {
    return String(email)
      .toLowerCase()
      .match(
        /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
      );
  };
  const newsletterBtn = document.getElementById("newsletterBtn");
  const email = document.getElementById("email");
  newsletterBtn.onclick = () => {
    console.log("clicked");
    if (validateEmail(email.value)) {
      newsletterBtn.innerHTML = "Sending..";
    }
  };
</script>
