---
import { type CollectionEntry, getCollection } from "astro:content";
import BlogPost from "../../layouts/BlogPost.astro";
import { render } from "astro:content";
import Main from "../../components/Main.astro";
import H1 from "../../components/H1.astro";
import Image from "astro/components/Image.astro";

export async function getStaticPaths() {
  const posts = await getCollection("posts");
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}
type Props = CollectionEntry<"posts">;

const post = Astro.props;
const { Content } = await render(post);
---

<BlogPost title={post.data.title} description={post.slug}>
  <Main>
    <H1 text={post.data.title} />
    <Image
      priority
      src={post.data.image}
      alt={post.data.title}
      width={1024}
      height={1024 / 1.5}
      format="webp"
      class="rounded-2xl shadow-xl mb-6 mx-auto aspect-thumbnail md:h-72 object-cover"
    />
    <div class="prose md:prose-xl mx-auto relative overflow-visible mb-20">
      <Content />
    </div>
  </Main>
</BlogPost>
